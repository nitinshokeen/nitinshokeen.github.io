<!DOCTYPE html>
<html>
<head>
	<title>Rent</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <style type="text/css">
    	.padding {
    padding: 20%;
}
    </style>
</head>
<body>
	<nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo">Rent Calculator</a>
            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
                <li><a href="submitReadings.html">Submit Readings</a>
                </li>
                <li><a class="profileLink">Readings</a>
                </li>
                <li><a class="feedLink">Rent</a>
                </li>
            </ul>
            <ul class="side-nav" id="mobile-demo">
                <li><a href="index.html">Home</a>
                </li>
                <li><a href="index.html">Submit Readings</a>
                </li>
                <li><a class="profileLink">Readings</a>
                </li>
                <li><a class="feedLink">Rent</a>
                </li>
            </ul>
        </div>
    </nav>
    <div align="center" class="container padding">
        <div class="loader preloader-wrapper big active">
            <div class="spinner-layer spinner-red-only">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- end loader container-->
        <div class="container">
        <div class="card-panel">
        <div class="row">
          <div class="col s12">
            <ul class="tabs">
              <li class="tab col s6"><a class="active" href="#homeTab">Home</a></li>
              <li class="tab col s6"><a href="#officeTab">Office</a></li>
            </ul>
          </div>
          </div>
      <div class="homeRentContainer" id="homeTab"></div>
      <div class="officeRentContainer" id="officeTab"></div>
      </div>
      </div>
</body>
<script type="text/javascript">
	$(document).ready(function() {
 $('.data').hide();
 $(".button-collapse").sideNav();
 var rentOfFlat;
 var office;

  $.ajax('https://sheets.googleapis.com/v4/spreadsheets/1RLTAa7rwCZ2sc7WW1E3N3QHESh1BQqG5KfJyfcAK_90/values/Calculator!B6:K16?key=AIzaSyCxek-9q_X3JX9ndKFq9O1LmTb6ZSFD4pE', {

   success: function(response) {
    console.log(typeof(response));
    rentOfFlat = response.values;
   }, //end sucess 
   error: function(request, errorType, errorMessage) {
    console.log(request);
    console.log(errorType);
    Materialize.toast(errorMessage, 3000);
    var $toastContent = $('<span>Please try again.</span>').add($('<button class="btn-flat toast-action"><a href="index.html">Retry</a></button>'));
    Materialize.toast($toastContent);
   }, //end error 

   timeout: 5000,

   beforeSend: function() {

    $('.loader').show();

   }, //end beforeSend 

   complete: function() {

     $('.loader').hide();
     $('.padding').removeClass("padding");
     $('.data').show();
     for (var i = 1; i < rentOfFlat.length; i++) {
     	makeRent(rentOfFlat[i][0], rentOfFlat[i][3], rentOfFlat[i][4], rentOfFlat[i][9],1);
     }
    } //end complete 
  }); //end ajax

  $.ajax("https://sheets.googleapis.com/v4/spreadsheets/1RLTAa7rwCZ2sc7WW1E3N3QHESh1BQqG5KfJyfcAK_90/values/'Office Calculator'!B6:K21?key=AIzaSyCxek-9q_X3JX9ndKFq9O1LmTb6ZSFD4pE", {

   success: function(response) {
    console.log(typeof(response));
    office = response.values;
   }, //end sucess 
   error: function(request, errorType, errorMessage) {
    console.log(request);
    console.log(errorType);
    Materialize.toast(errorMessage, 3000);
    var $toastContent = $('<span>Please try again.</span>').add($('<button class="btn-flat toast-action"><a href="index.html">Retry</a></button>'));
    Materialize.toast($toastContent);
   }, //end error 

   timeout: 5000,

   beforeSend: function() {

    $('.loader').show();

   }, //end beforeSend 

   complete: function() {

     $('.loader').hide();
     $('.padding').removeClass("padding");
     $('.data').show();
     for (var i = 1; i < office.length; i++) {
      makeRent(office[i][0], office[i][3], office[i][4], office[i][9],2);
     }
    } //end complete 


  }); //end ajax

function makeRent(flatNumber,units,bill,total,n) {
  var fno = '<div class="row card-panel"><div class="col s3">';
  var unit = '</div><div class="col s3">';
  var bil = '</div><div class="col s3">';
  var tot = '</div><div class="col s3">';
  if (n==1) {
    $(".homeRentContainer").append(fno + flatNumber + unit + units + bil + bill + tot + total + '</div></div>');
    }
  if (n==2) {
   $(".officeRentContainer").append(fno + flatNumber + unit + units + bil + bill + tot + total + '</div></div>');
 }
 };

});
</script>
</html>